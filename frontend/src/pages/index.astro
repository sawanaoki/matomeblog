---
import Layout from '../layouts/Layout.astro';
import articles from '../data/articles.json';

const formatDate = (dateString) => {
    const d = new Date(dateString);
    return `${d.getMonth()+1}æœˆ${d.getDate()}æ—¥ ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;
};

// ãƒ¢ãƒƒã‚¯ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰è¨˜äº‹
const mockTrends = [
    "æŸæœ‰åäººãŒSNSã§å¤§ç‚ä¸Šï¼ãã®ç†ç”±ã¨ã¯â€¦",
    "äººæ°—VTuberãŒçªç„¶ã®æ´»å‹•ä¼‘æ­¢ç™ºè¡¨ã§ãƒ•ã‚¡ãƒ³æ‚²é³´",
    "æ–°ä½œRPGã®ãƒã‚°ãŒã‚«ã‚ªã‚¹ã™ãã¦ãƒ¤ãƒã„ï½—ï½—ï½—",
    "ãƒãƒƒãƒˆã§è©±é¡Œã®è¬ã®å‹•ç”»ã€ã¤ã„ã«çœŸç›¸ãŒç‰¹å®šã•ã‚Œã‚‹",
    "è¡æ’ƒï¼ã‚ã®å›½æ°‘çš„ã‚¢ãƒ‹ãƒ¡ã®è£è¨­å®šãŒã‚¨ã‚°ã™ãã‚‹â€¦"
];
---

<Layout title="æœ€æ–°ã¾ã¨ã‚è¨˜äº‹ - Esuteru Clone">
    <div class="page-container">
        <!-- Main Content (Left Column) -->
        <main class="main-column">
            <div class="main-header">
                <h2>æœ€æ–°ã¾ã¨ã‚è¨˜äº‹ä¸€è¦§</h2>
            </div>
            
            <div class="article-list">
                {articles.map((article) => (
                    <article class="list-item">
                        <a href={`/article/${article.id}`} class="list-item-link">
                            <div class="item-thumbnail">
                                <img src={article.imageUrl} alt={article.title} loading="lazy" />
                                <span class="source-tag">{article.source.split(' - ')[1] || 'ãƒ‹ãƒ¥ãƒ¼ã‚¹'}</span>
                            </div>
                            <div class="item-details">
                                <h3 class="item-title">{article.title}</h3>
                                <div class="item-meta">
                                    <span class="item-date">{formatDate(article.pubDate)}</span>
                                    <span class="item-comments">ã‚³ãƒ¡ãƒ³ãƒˆ({Math.floor(Math.random() * 500) + 10})</span>
                                </div>
                                <p class="item-snippet">{article.contentSnippet.substring(0, 80)}...</p>
                            </div>
                        </a>
                    </article>
                ))}
            </div>
        </main>

        <!-- Sidebar (Right Column) -->
        <aside class="sidebar">
            <div class="sidebar-widget">
                <div class="widget-header">
                    <h3>ğŸ† äººæ°—è¨˜äº‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h3>
                </div>
                <ul class="trend-list">
                    {mockTrends.map((title, index) => (
                        <li>
                            <a href="#">
                                <span class="rank">{index + 1}</span>
                                <span class="trend-title">{title}</span>
                            </a>
                        </li>
                    ))}
                </ul>
            </div>
            
            <div class="sidebar-widget">
                <div class="widget-header">
                    <h3>ğŸ·ï¸ ã‚«ãƒ†ã‚´ãƒª</h3>
                </div>
                <ul class="category-list">
                    <li><a href="#">ã‚²ãƒ¼ãƒ ãƒ»ã‚¢ãƒ‹ãƒ¡</a></li>
                    <li><a href="#">ITãƒ»ã‚¬ã‚¸ã‚§ãƒƒãƒˆ</a></li>
                    <li><a href="#">ç”Ÿæ´»ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡</a></li>
                    <li><a href="#">ç‚ä¸Šãƒ»è©±é¡Œ</a></li>
                    <li><a href="#">VIPãƒ»5chãƒã‚¿</a></li>
                </ul>
            </div>
            
            <div class="sidebar-widget">
                <div class="widget-header">
                    <h3>ğŸ“¢ ãŠçŸ¥ã‚‰ã›</h3>
                </div>
                <div class="widget-content" style="padding: 1rem; font-size: 0.85rem; color: #475569; line-height: 1.5;">
                    <p>å½“ã‚µã‚¤ãƒˆã¯2ch/5chã®æƒ…å ±ã‚’è‡ªå‹•ã§ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚ãŠå•ã„åˆã‚ã›ã¯Twitterã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
                </div>
            </div>
        </aside>
    </div>
</Layout>

<style>
    .page-container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 2rem 1rem;
        display: grid;
        grid-template-columns: 1fr 340px; /* ãƒ¡ã‚¤ãƒ³ã¨ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®2ã‚«ãƒ©ãƒ  */
        gap: 2rem;
        align-items: start;
    }

    /* Main Column */
    .main-column {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .main-header {
        background: #f8fafc;
        border-bottom: 2px solid #2563eb;
        padding: 1rem 1.5rem;
    }

    .main-header h2 {
        font-size: 1.25rem;
        font-weight: 800;
        color: #1e293b;
        margin: 0;
    }

    .article-list {
        display: flex;
        flex-direction: column;
    }

    .list-item {
        border-bottom: 1px dashed #cbd5e1;
        transition: background-color 0.2s;
    }

    .list-item:last-child {
        border-bottom: none;
    }

    .list-item:hover {
        background-color: #f1f5f9;
        cursor: pointer;
    }

    .list-item-link {
        display: flex;
        padding: 1.2rem 1.5rem;
        gap: 1.5rem;
        text-decoration: none;
        color: inherit;
    }

    .item-thumbnail {
        width: 180px;
        height: 110px;
        flex-shrink: 0;
        position: relative;
        border-radius: 4px;
        overflow: hidden;
        border: 1px solid #e2e8f0;
    }

    .item-thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .source-tag {
        position: absolute;
        bottom: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        font-size: 0.7rem;
        font-weight: bold;
        padding: 0.2rem 0.5rem;
    }

    .item-details {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .item-title {
        font-size: 1.15rem;
        font-weight: 700;
        color: #1e3a8a;
        line-height: 1.4;
        margin-bottom: 0.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .list-item:hover .item-title {
        text-decoration: underline;
        color: #2563eb;
    }

    .item-meta {
        font-size: 0.8rem;
        color: #64748b;
        margin-bottom: 0.5rem;
        display: flex;
        gap: 1rem;
    }

    .item-comments {
        color: #ef4444;
        font-weight: bold;
    }

    .item-snippet {
        font-size: 0.85rem;
        color: #475569;
        line-height: 1.5;
        margin: 0;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .sidebar-widget {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        overflow: hidden;
    }

    .widget-header {
        background: #334155;
        color: #fff;
        padding: 0.6rem 1rem;
    }

    .widget-header h3 {
        font-size: 0.95rem;
        font-weight: 700;
        margin: 0;
    }

    .trend-list, .category-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .trend-list li, .category-list li {
        border-bottom: 1px dashed #e2e8f0;
    }

    .trend-list li:last-child, .category-list li:last-child {
        border-bottom: none;
    }

    .trend-list a, .category-list a {
        display: flex;
        padding: 0.8rem 1rem;
        text-decoration: none;
        color: #334155;
        font-size: 0.85rem;
        transition: background-color 0.2s;
        align-items: center;
        gap: 0.6rem;
    }

    .trend-list a:hover, .category-list a:hover {
        background-color: #f8fafc;
        color: #2563eb;
    }

    .rank {
        background: #cbd5e1;
        color: #475569;
        font-weight: 900;
        font-size: 0.75rem;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 3px;
        flex-shrink: 0;
    }

    .trend-list li:nth-child(1) .rank { background: #ef4444; color: #fff; }
    .trend-list li:nth-child(2) .rank { background: #f97316; color: #fff; }
    .trend-list li:nth-child(3) .rank { background: #eab308; color: #fff; }

    .trend-title {
        line-height: 1.4;
    }

    @media (max-width: 900px) {
        .page-container {
            grid-template-columns: 1fr;
        }
        .item-thumbnail {
            width: 140px;
            height: 90px;
        }
    }

    @media (max-width: 500px) {
        .list-item-link {
            flex-direction: column;
            gap: 1rem;
            padding: 1rem;
        }
        .item-thumbnail {
            width: 100%;
            height: 180px;
        }
    }
</style>
